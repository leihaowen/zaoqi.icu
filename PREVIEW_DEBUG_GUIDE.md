# 预览功能调试指南

## 🐛 问题描述
用户反馈：预览的时候 BATNA 分析和利益相关者分析都没有展示

## 🔍 可能的原因

### 1. 数据未正确加载
- **检查方法**：在浏览器开发者工具 Console 中查看调试信息
- **预期输出**：应该看到类似这样的日志：
```
导出数据检查: {
  batnaOptions: 3,
  stakeholders: 4, 
  bestBatna: true,
  bottomLineBuffer: 3
}
```

### 2. 示例数据未完全加载
- **检查方法**：确认是否点击了"加载小李案例"按钮
- **验证步骤**：
  1. 回到首页
  2. 点击"📋 加载小李案例 (男方视角)"
  3. 进入第8步查看预览

### 3. 数据条件判断问题
- **BATNA 显示条件**：`data.batnaOptions?.length > 0`
- **利益相关者显示条件**：`data.stakeholders?.length > 0`

## 🛠️ 调试步骤

### Step 1: 检查数据加载
1. 打开浏览器开发者工具 (F12)
2. 切换到 Console 标签
3. 进入第8步，点击"📋 预览报告内容"
4. 查看控制台输出的调试信息

### Step 2: 验证各步骤数据
1. **第4步 BATNA**：
   - 应该有3个BATNA选项
   - 最佳BATNA应该是"改为旅行婚礼"
   - 安全缓冲应该是3万元

2. **第5步 利益相关者**：
   - 应该有4个利益相关者
   - 包括：女方父亲、女方母亲、小舅子、女方本人

### Step 3: 手动验证数据
在浏览器控制台中运行：
```javascript
// 检查当前存储的数据
const store = JSON.parse(localStorage.getItem('negotiation-data'))
console.log('BATNA选项数量:', store?.state?.batnaOptions?.length || 0)
console.log('利益相关者数量:', store?.state?.stakeholders?.length || 0)
console.log('最佳BATNA:', store?.state?.bestBatna?.name || '无')
```

## 🎯 预期的正确显示

### BATNA 分析部分应该显示：
```
🧮 BATNA分析

🏆 最佳BATNA: 改为旅行婚礼
净价值: 6.0 万元
全套支出≤10万，但缺少传统仪式感
谈判底线: 3.0 万元 (缓冲: 3 万元)

所有BATNA选项对比:
1. 改为旅行婚礼 ⭐ (净值: 6.0 万)
2. 推迟婚期6个月 (净值: 4.0 万) 
3. 向父母借款 (净值: 2.0 万)
```

### 利益相关者分析部分应该显示：
```
👥 利益相关者分析

女方父亲 (决策者)
影响力: 9/10 | 支持度: 4/10
痛点: 担心女儿嫁得不体面、在亲戚面前没面子...
利益诉求: 女儿婚后幸福、家族声誉、经济安全感

女方母亲 (影响者)
影响力: 8/10 | 支持度: 5/10
...

小舅子(女方弟弟) (关键盟友)
影响力: 7/10 | 支持度: 6/10
...

女方本人 (当事人)
影响力: 6/10 | 支持度: 7/10
...
```

## 🚀 解决方案

### 方案1: 重新加载示例数据
1. 回到首页
2. 点击"📋 加载小李案例 (男方视角)"
3. 等待页面跳转到第1步
4. 直接跳转到第8步查看预览

### 方案2: 手动填写数据
如果示例数据有问题，可以手动填写：

**第4步 - 添加BATNA选项：**
1. 推迟婚期6个月 (收益5万，风险1万，净值4万)
2. 改为旅行婚礼 (收益10万，风险3万，转换1万，净值6万)
3. 向父母借款 (收益5万，成本0.5万，风险2万，转换0.5万，净值2万)

**第5步 - 添加利益相关者：**
1. 女方父亲 (决策者，影响力9，支持度4)
2. 女方母亲 (影响者，影响力8，支持度5)
3. 小舅子 (关键盟友，影响力7，支持度6)
4. 女方本人 (当事人，影响力6，支持度7)

### 方案3: 清除缓存重新开始
如果数据混乱，可以：
1. 打开开发者工具
2. 在 Console 中运行：`localStorage.clear()`
3. 刷新页面
4. 重新加载示例数据

## 📝 反馈信息

如果问题仍然存在，请提供：
1. 浏览器控制台的调试输出
2. 当前在第几步
3. 是否使用了示例数据
4. 具体看到的预览内容

这将帮助我们快速定位和解决问题。